<div class="section"> 
    <div class="container">
      <div class="panel">
        <div class="panelHeader"><h2>Login Account</h2></div>
        <div class="panelBody">

            <form id="form" class="form1">
            <input id="username" type="text" placeholder="Username">
            <input id="password" type="password" placeholder="Password">            
            <button class="button button-red" type="submit">Login</button>
            </form>
            <a href="/signup" class="sign-up">Sign Up</a>

        </div>
        
            

      </div>    
    </div>


</div>

<script> 
    async function login() 
    
    {
        let username = document.getElementById("username").value
        let password = document.getElementById("password").value
        let response = await fetch("/api/users/login", {
            method: "POST",
            body: JSON.stringify({
                username: username,
                password: password
            }),headers: {
                "Content-Type": "application/json"
            }
        }) 
        if(response.ok){
            document.location.replace('/dashboard')
        }
         let data = await response.json() 
         alert(data.message)  
         if(data.message == "You are now logged in!"){
            window.location.href="/dashboard"
         } console.log("login");
    }
let form = document.getElementById("form")
form.addEventListener("submit", function(){
    event.preventDefault()
    login();
})
</script>